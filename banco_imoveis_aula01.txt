CREATE DATABASE imoveis_daniel;

USE imoveis_daniel;

CREATE TABLE compradores (
    cd_comprador INT NOT NULL,
    nm_comprador VARCHAR(50) NOT NULL,
    nm_enderecocomprador VARCHAR(50) NOT NULL,
    nr_cpfcomprador VARCHAR(11) NOT NULL,
    cd_cidade INT NOT NULL,
    cd_bairro INT NOT NULL,
    sg_estado CHAR(2) NOT NULL,
    tel_comprador VARCHAR(11) NOT NULL
);

CREATE TABLE vendedor (
    cd_vendedor INT NOT NULL,
    nm_vendedor VARCHAR(50) NOT NULL,
    nm_endereco VARCHAR(50) NOT NULL,
    nr_cpf VARCHAR(11) NOT NULL,
    cd_cidade INT NOT NULL,
    cd_bairro INT NOT NULL,
    sg_estado CHAR(2) NOT NULL,
    telefone VARCHAR(11) NOT NULL,
    data_nasc DATE NOT NULL
);

/* 3ª */
CREATE TABLE cidade (
    cd_cidade INT NOT NULL,
    nm_cidade VARCHAR(50) NOT NULL,
    sg_estado CHAR(2) NOT NULL
);

INSERT INTO cidade VALUES (1, 'Rio Branco', 'AC');
INSERT INTO cidade VALUES (2, 'Maceió', 'AL');
INSERT INTO cidade VALUES (3, 'Macapá', 'AP');
INSERT INTO cidade VALUES (4, 'Manaus', 'AM');
INSERT INTO cidade VALUES (5, 'Salvador', 'BA');
INSERT INTO cidade VALUES (6, 'Fortaleza', 'CE');
INSERT INTO cidade VALUES (7, 'Brasilia', 'DF');
INSERT INTO cidade VALUES (8, 'Vitória', 'ES');
INSERT INTO cidade VALUES (9, 'Goiás', 'GO');
INSERT INTO cidade VALUES (10, 'São Luís', 'MA');
INSERT INTO cidade VALUES (11, 'Cuiabá', 'MT');
INSERT INTO cidade VALUES (12, 'Campo Grande', 'MS');
INSERT INTO cidade VALUES (13, 'Belo Horizonte', 'MG');
INSERT INTO cidade VALUES (14, 'Pará', 'PA');
INSERT INTO cidade VALUES (15, 'João Pessoa', 'PB');
INSERT INTO cidade VALUES (16, 'Curitiba', 'PR');
INSERT INTO cidade VALUES (17, 'Recife', 'PE');
INSERT INTO cidade VALUES (18, 'Teresina', 'PI');
INSERT INTO cidade VALUES (19, 'Rio de Janeiro', 'RJ');
INSERT INTO cidade VALUES (20, 'Natal', 'RN');
INSERT INTO cidade VALUES (21, 'Porto Alegre', 'RS');
INSERT INTO cidade VALUES (22, 'Porto Velho', 'RO');
INSERT INTO cidade VALUES (23, 'Boa Vista', 'RR');
INSERT INTO cidade VALUES (24, 'Florianópolis', 'SC');
INSERT INTO cidade VALUES (25, 'São Paulo', 'SP');
INSERT INTO cidade VALUES (26, 'Aracaju', 'SE');
INSERT INTO cidade VALUES (27, 'Palmas', 'TO');

INSERT INTO cidade VALUES (28, 'Cruzeiro do Sul', 'AC');
INSERT INTO cidade VALUES (29, 'Sena Madureira', 'AC');
INSERT INTO cidade VALUES (30, 'Tarauacá', 'AC');
INSERT INTO cidade VALUES (31, 'Feijó', 'AC');
INSERT INTO cidade VALUES (32, 'Brasileia', 'AC');

INSERT INTO cidade VALUES (33, 'Água Branca', 'AL');
INSERT INTO cidade VALUES (34, 'Anadia', 'AL');
INSERT INTO cidade VALUES (35, 'Arapiraca', 'AL');
INSERT INTO cidade VALUES (36, 'Atalaia', 'AL');
INSERT INTO cidade VALUES (37, 'Barra de Santo Antônio', 'AL');

INSERT INTO cidade VALUES (38, 'Calçonete', 'AP');
INSERT INTO cidade VALUES (39, 'Cutias', 'AP');
INSERT INTO cidade VALUES (40, 'Ferreira Gomes', 'AP');
INSERT INTO cidade VALUES (41, 'Itaubau', 'AP');
INSERT INTO cidade VALUES (42, 'Laranjal do Jari', 'AP');

INSERT INTO cidade VALUES (43, 'Alvarães', 'AM');
INSERT INTO cidade VALUES (44, 'Amaturá', 'AM');
INSERT INTO cidade VALUES (45, 'Anamã', 'AM');
INSERT INTO cidade VALUES (46, 'Anori', 'AM');
INSERT INTO cidade VALUES (47, 'Atalaia do Norte', 'AM');

INSERT INTO cidade VALUES (48, 'Abaíra', 'BA');
INSERT INTO cidade VALUES (49, 'Abaré', 'BA');
INSERT INTO cidade VALUES (50, 'Água Fria', 'BA');
INSERT INTO cidade VALUES (51, 'Alagoinhas', 'BA');
INSERT INTO cidade VALUES (52, 'Canavieiras', 'BA');

INSERT INTO cidade VALUES (53, 'Apuiarés', 'CE');
INSERT INTO cidade VALUES (54, 'Aquiraz', 'CE');
INSERT INTO cidade VALUES (55, 'Ererê', 'CE');
INSERT INTO cidade VALUES (56, 'Farias Brito', 'CE');
INSERT INTO cidade VALUES (57, 'Forquilha', 'CE');

INSERT INTO cidade VALUES (58, 'Cachoiro do Itapemirim', 'ES');
INSERT INTO cidade VALUES (59, 'Boa Esperança', 'ES');
INSERT INTO cidade VALUES (60, 'Domingo Martins', 'ES');
INSERT INTO cidade VALUES (61, 'Fundão', 'ES');
INSERT INTO cidade VALUES (62, 'Marataízes', 'ES');

INSERT INTO cidade VALUES (63, 'Cachoeira de Goiás', 'GO');
INSERT INTO cidade VALUES (64, 'Campinorte', 'GO');
INSERT INTO cidade VALUES (65, 'Damianópolis', 'GO');
INSERT INTO cidade VALUES (66, 'Cristanópolis', 'GO');
INSERT INTO cidade VALUES (67, 'Palestina de Goiás', 'GO');

INSERT INTO cidade VALUES (68, 'Barrerinhas', 'MA');
INSERT INTO cidade VALUES (69, 'Bela Vista do Maranhão', 'MA');
INSERT INTO cidade VALUES (70, 'Buritirana', 'MA');
INSERT INTO cidade VALUES (71, 'Governador Newton Bello', 'MA');
INSERT INTO cidade VALUES (72, 'Lago da Pedra', 'MA');
INSERT INTO cidade VALUES (73, 'Montes Altos', 'MA');

INSERT INTO cidade VALUES (74, 'Alto Paraguai', 'MT');
INSERT INTO cidade VALUES (75, 'Barra dos Garças', 'MT');
INSERT INTO cidade VALUES (76, 'Cáceres', 'MT');
INSERT INTO cidade VALUES (77, 'Campinápoles', 'MT');
INSERT INTO cidade VALUES (78, 'Gaúcha do Norte', 'MT');

INSERT INTO cidade VALUES (79, 'Angélica', 'MS');
INSERT INTO cidade VALUES (80, 'Antônio João', 'MS');
INSERT INTO cidade VALUES (81, 'Batayporrã', 'MS');
INSERT INTO cidade VALUES (82, 'Camapuã', 'MS');
INSERT INTO cidade VALUES (83, 'Iguatemi', 'MS');

INSERT INTO cidade VALUES (84, 'Montes Claros', 'MG');
INSERT INTO cidade VALUES (85, 'Aparecida do Mundo Novo', 'MG');
INSERT INTO cidade VALUES (86, 'Formiga', 'MG');
INSERT INTO cidade VALUES (87, 'Barbacena', 'MG');
INSERT INTO cidade VALUES (88, 'São Pedro das Garças', 'MG');

INSERT INTO cidade VALUES (89, 'Belterra', 'PA');
INSERT INTO cidade VALUES (90, 'Bonito', 'PA');
INSERT INTO cidade VALUES (91, 'Colares', 'PA');
INSERT INTO cidade VALUES (92, 'Melgaço', 'PA');
INSERT INTO cidade VALUES (93, 'Santa Maria das Barreiras', 'PA');

INSERT INTO cidade VALUES (94, 'Algodão da Jandaíra', 'PB');
INSERT INTO cidade VALUES (95, 'Belém', 'PB');
INSERT INTO cidade VALUES (96, 'Bayeux', 'PB');
INSERT INTO cidade VALUES (97, 'Campina Grande', 'PB');
INSERT INTO cidade VALUES (98, 'Mogueiro', 'PB');

INSERT INTO cidade VALUES (99, 'Antonina', 'PR');
INSERT INTO cidade VALUES (100, 'Bandeirantes', 'PR');
INSERT INTO cidade VALUES (101, 'Cafelândia', 'PR');
INSERT INTO cidade VALUES (102, 'Fernandes Pinheiro', 'PR');
INSERT INTO cidade VALUES (103, 'Missal', 'PR');

INSERT INTO cidade VALUES (104, 'Águas Belas', 'PE');
INSERT INTO cidade VALUES (105, 'Bom Conselho', 'PE');
INSERT INTO cidade VALUES (106, 'Caetés', 'PE');
INSERT INTO cidade VALUES (107, 'Joaquim Nabuco', 'PE');
INSERT INTO cidade VALUES (108, 'Palmares', 'PE');

INSERT INTO cidade VALUES (109, 'Altos', 'PI');
INSERT INTO cidade VALUES (110, 'Belém do Piaui', 'PI');
INSERT INTO cidade VALUES (111, 'Colônia do Piaui', 'PI');
INSERT INTO cidade VALUES (112, 'Guadalupe', 'PI');
INSERT INTO cidade VALUES (113, 'Lagoa de São Francisco', 'PI');

INSERT INTO cidade VALUES (114, 'Angra dos Reis', 'RJ');
INSERT INTO cidade VALUES (115, 'São Sebastião do Alto', 'RJ');
INSERT INTO cidade VALUES (116, 'Nova Friburgo', 'RJ');
INSERT INTO cidade VALUES (117, 'Parati', 'RJ');
INSERT INTO cidade VALUES (118, 'Macaé', 'RJ');

INSERT INTO cidade VALUES (119, 'Apodi', 'RN');
INSERT INTO cidade VALUES (120, 'Caiçara do Norte', 'RN');
INSERT INTO cidade VALUES (121, 'Guamaré', 'RN');
INSERT INTO cidade VALUES (122, 'João Câmara', 'RN');
INSERT INTO cidade VALUES (123, 'Macau', 'RN');

INSERT INTO cidade VALUES (124, 'Alecrim', 'RS');
INSERT INTO cidade VALUES (125, 'Alegria', 'RS');
INSERT INTO cidade VALUES (126, 'Bento Gonçalves', 'RS');
INSERT INTO cidade VALUES (127, 'Cachoeirinha', 'RS');
INSERT INTO cidade VALUES (128, 'Farroupilha', 'RS');

INSERT INTO cidade VALUES (129, 'Alto Paraíso', 'RO');
INSERT INTO cidade VALUES (130, 'Buritis', 'RO');
INSERT INTO cidade VALUES (131, 'Castanheiras', 'RO');
INSERT INTO cidade VALUES (132, 'Nova Mamoré', 'RO');
INSERT INTO cidade VALUES (133, 'Santa Luzia D oeste', 'RO');

INSERT INTO cidade VALUES (134, 'Amajari', 'RR');
INSERT INTO cidade VALUES (135, 'São Luiz', 'RR');
INSERT INTO cidade VALUES (136, 'Mucajaí', 'RR');
INSERT INTO cidade VALUES (137, 'Caroebe', 'RR');
INSERT INTO cidade VALUES (138, 'Pacaraima', 'RR');

INSERT INTO cidade VALUES (139, 'Águas Frias', 'SC');
INSERT INTO cidade VALUES (140, 'Chapecó', 'SC');
INSERT INTO cidade VALUES (141, 'Catanduvas', 'SC');
INSERT INTO cidade VALUES (142, 'Palhoça', 'SC');
INSERT INTO cidade VALUES (143, 'Santa Rosa de Lima', 'SC');

INSERT INTO cidade VALUES (144, 'Aparecida', 'SP');
INSERT INTO cidade VALUES (145, 'Marília', 'SP');
INSERT INTO cidade VALUES (146, 'Jaguariuna', 'SP');
INSERT INTO cidade VALUES (147, 'Cotia', 'SP');
INSERT INTO cidade VALUES (148, 'Águas de Lindóia', 'SP');

INSERT INTO cidade VALUES (149, 'Amparo de São Francisco', 'SE');
INSERT INTO cidade VALUES (150, 'Estância', 'SE');
INSERT INTO cidade VALUES (151, 'Ilha das Flores', 'SE');
INSERT INTO cidade VALUES (152, 'Monte Alegre do Sergipe', 'SE');
INSERT INTO cidade VALUES (153, 'Riachuelo', 'SE');

INSERT INTO cidade VALUES (154, 'Alvorada', 'TO');
INSERT INTO cidade VALUES (155, 'Caseara', 'TO');
INSERT INTO cidade VALUES (156, 'Fátima', 'TO');
INSERT INTO cidade VALUES (157, 'Filadélfia', 'TO');
INSERT INTO cidade VALUES (158, 'Lizarda', 'TO');

/* 4ª */
CREATE TABLE bairro (
    cd_bairro INT NOT NULL,
    nm_bairro VARCHAR(50) NOT NULL,
    cd_cidade INT NOT NULL,
    sg_estado CHAR(2) NOT NULL
);

/* 1ª */
CREATE TABLE estado (
    sg_estado CHAR(2) NOT NULL, 
    nm_estado VARCHAR(50) NOT NULL
);

INSERT INTO estado VALUES ('AC', 'Acre');
INSERT INTO estado VALUES ('AL', 'Alagoas');
INSERT INTO estado VALUES ('AP', 'Amapá');
INSERT INTO estado VALUES ('AM', 'Amazonas');
INSERT INTO estado VALUES ('BA', 'Bahia');
INSERT INTO estado VALUES ('CE', 'Ceará');
INSERT INTO estado VALUES ('DF', 'Distrito Federal');
INSERT INTO estado VALUES ('ES', 'Espírito Santo');
INSERT INTO estado VALUES ('GO', 'Goiás');
INSERT INTO estado VALUES ('MA', 'Maranhão');
INSERT INTO estado VALUES ('MT', 'Mato Grosso');
INSERT INTO estado VALUES ('MS', 'Mato Grosso do Sul');
INSERT INTO estado VALUES ('MG', 'Minas Gerais');
INSERT INTO estado VALUES ('PA', 'Pará');
INSERT INTO estado VALUES ('PB', 'Paraíba');
INSERT INTO estado VALUES ('PR', 'Paraná');
INSERT INTO estado VALUES ('PE', 'Pernanbuco');
INSERT INTO estado VALUES ('PI', 'Piaui');
INSERT INTO estado VALUES ('RJ', 'Rio de Janeiro');
INSERT INTO estado VALUES ('RN', 'Rio Grande do Norte');
INSERT INTO estado VALUES ('RS', 'Rio Grande do Sul');
INSERT INTO estado VALUES ('RO', 'Rondônia');
INSERT INTO estado VALUES ('RR', 'Roraima');
INSERT INTO estado VALUES ('SC', 'Santa Catarina');
INSERT INTO estado VALUES ('SP', 'São Paulo');
INSERT INTO estado VALUES ('SE', 'Sergipe');
INSERT INTO estado VALUES ('TO', 'Tocantins');

CREATE TABLE oferta (
    cd_oferta INT NOT NULL,
    cd_imovel INT NOT NULL,
    cd_comprador INT NOT NULL,
    vl_oferta DECIMAL(9,2) NOT NULL,
    dt_oferta DATETIME NOT NULL
);

/* 2ª */
CREATE TABLE faixa_imovel (
    cd_faixa INT NOT NULL,
    nm_faixa VARCHAR(50) NOT NULL,
    vl_minimo DECIMAL(9,2) NOT NULL,
    vl_maximo DECIMAL(9,2) NOT NULL
);

INSERT INTO faixa_imovel VALUES (1, 'baixo', 0, 105000);
INSERT INTO faixa_imovel VALUES (2, 'medio', 105001, 180000);
INSERT INTO faixa_imovel VALUES (3, 'alto', 180001, 999999);

CREATE TABLE imovel(
    cd_imovel INT NOT NULL,
    cd_vendedor INT NOT NULL,
    cd_bairro INT NOT NULL,
    cd_cidade INT NOT NULL,
    sg_estado CHAR(2) NOT NULL,
    nm_endereco VARCHAR(50) NOT NULL,
    nr_areautil DECIMAL(9,2) NOT NULL,
    nr_areatotal DECIMAL(9,2) NOT NULL,
    vl_preco DECIMAL(9,2) NOT NULL,
    cd_oferta INT NOT NULL,
    st_vendido BIT NOT NULL,
    data_lancto DATETIME NOT NULL
);

ALTER TABLE compradores
ADD PRIMARY KEY (cd_comprador);

ALTER TABLE vendedor
ADD PRIMARY KEY (cd_vendedor);

ALTER TABLE cidade
ADD PRIMARY KEY (cd_cidade);

ALTER TABLE bairro
ADD PRIMARY KEY (cd_bairro);

ALTER TABLE estado
ADD PRIMARY KEY (sg_estado);

ALTER TABLE oferta
ADD PRIMARY KEY (cd_oferta);

ALTER TABLE faixa_imovel
ADD PRIMARY KEY (cd_faixa);

ALTER TABLE imovel
ADD PRIMARY KEY (cd_imovel);

ALTER TABLE compradores
ADD FOREIGN KEY (cd_cidade)
REFERENCES cidade (cd_cidade);

ALTER TABLE compradores
ADD FOREIGN KEY (cd_bairro)
REFERENCES bairro (cd_bairro);

ALTER TABLE compradores
ADD FOREIGN KEY (sg_estado)
REFERENCES estado (sg_estado);

ALTER TABLE vendedor
ADD FOREIGN KEY (cd_cidade)
REFERENCES cidade (cd_cidade);

ALTER TABLE vendedor
ADD FOREIGN KEY (cd_bairro)
REFERENCES bairro (cd_bairro);

ALTER TABLE vendedor
ADD FOREIGN KEY (sg_estado)
REFERENCES estado (sg_estado);

ALTER TABLE cidade
ADD FOREIGN KEY (sg_estado)
REFERENCES estado (sg_estado);

ALTER TABLE bairro
ADD FOREIGN KEY (cd_cidade)
REFERENCES cidade (cd_cidade);

ALTER TABLE bairro
ADD FOREIGN KEY (sg_estado)
REFERENCES estado (sg_estado);

ALTER TABLE oferta
ADD FOREIGN KEY (cd_imovel)
REFERENCES imovel (cd_imovel);

ALTER TABLE oferta
ADD FOREIGN KEY (cd_comprador)
REFERENCES compradores (cd_comprador);

ALTER TABLE imovel
ADD FOREIGN KEY (cd_vendedor)
REFERENCES vendedor (cd_vendedor);

ALTER TABLE imovel
ADD FOREIGN KEY (cd_bairro)
REFERENCES bairro (cd_bairro);

ALTER TABLE imovel
ADD FOREIGN KEY (cd_cidade)
REFERENCES cidade (cd_cidade);

ALTER TABLE imovel
ADD FOREIGN KEY (sg_estado)
REFERENCES estado (sg_estado);

ALTER TABLE imovel
ADD FOREIGN KEY (cd_oferta)
REFERENCES oferta (cd_oferta);

